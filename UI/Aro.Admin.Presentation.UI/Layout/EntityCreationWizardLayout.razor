@typeparam TEntity
@inherits LayoutComponentBase

<CascadingValue Value="Wizard">
<div class="full-screen-overlay">
    <div class="row g-0 h-100">
        <!-- Wizard Header -->
        <div class="col-12 card-bg-dark">
            <WizardHeader 
                HeaderTitle="@Title"
                ReturnTo="@Wizard.NavigateTo" />
        </div>
        <!-- Wizard Steps (Sidebar) -->
        <div class="d-none d-md-block col-xl-2  border-end bg-white">
            <WizardSteps StepTitles="Wizard.StepTitles"
                            ActiveStepIndex="Wizard.ActiveStepIndex"
                            AllStepsCompleted="Wizard.EntityCreationComplete" />
        </div>

        <!-- Child content -->
        <div class="col-xl-10 h-100 overflow-y-auto">
            <div class="p-5" style="min-height: 70vh;">
                @ChildContent
            </div>

            <!-- Wizard Navigation -->
            <div style="min-height: 25vh;">
                <WizardNavigation TEntity="TEntity" />
            </div>
        </div>

    </div>
</div>

</CascadingValue>

<style>
    .full-screen-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: #F6F6F6;
        overflow: hidden
    }

    .card-bg-dark {
        background-color: #434343;
        color: white;
    }
</style>

@code {
    [Parameter] public EntityWizardContext<TEntity> Wizard { get; set; } = default!;

    [Parameter] public RenderFragment? ChildContent { get; set; }

    private string Title => $"{(Wizard.IsCreateMode ? "Add New" : "Edit")} {Wizard.Title}";
}
