@page "/"


@attribute [Authorize]
@using Microsoft.AspNetCore.Components.Authorization

<PageTitle>ARO Admin - Home</PageTitle>

<AuthorizeView>
    <Authorized>
        <div class="container-fluid min-vh-100">
            <div class="vstack gap-5 p-3">
                <div class="d-flex justify-content-end">

                    <MudIconButton 
                        Icon="@Icons.Material.Filled.Search"
                        Variant="Variant.Text"
                        Color="Color.Dark"
                        Class="button-search shadow"
                        @onclick="HandleSearch"></MudIconButton>
                </div>

                @* 
                <div class="top-right-section">
                    <div class="top-right-profile">
                        <img class="profile-img" Src="icons/profile.png" />
                        <span class="property-name">Brochner hotels</span>
                        <img src="icons/dropdown.png" alt="Dropdown" class="dropdown-icon"   />
                    </div>

                    <div class="top-right-icons" @onclick="HandleSettings">
                        <img src="icons/settings.png" alt="Settings" />
                    </div>
                </div>
                *@

                <GroupList />
            </div>
        </div>
    </Authorized>
    <NotAuthorized>
        <RedirectToLogin />
    </NotAuthorized>
</AuthorizeView>

@code {
    [Inject] private NavigationManager? NavigationManager { get; set; }

    @*
    string GetFirstName(string? fullName)
    {
        if (string.IsNullOrWhiteSpace(fullName))
            return "Alex";

        // Try to extract first name from email or full name
        if (fullName.Contains("@"))
        {
            var emailPart = fullName.Split('@')[0];
            var nameParts = emailPart.Split('.');
            return char.ToUpper(nameParts[0][0]) + nameParts[0].Substring(1);
        }

        var parts = fullName.Split(' ');
        return parts[0];
    }

    private void HandleAddGroup()
    {
        // Navigate to add group page or show dialog
        NavigationManager?.NavigateTo("/groups/add");
    }

@* 
    private void HandleAddGroup()
    {
        // Navigate to property information wizard
        NavigationManager?.NavigateTo("/property/information");
    }
*@
    private void HandleSearch()
    {
        // Implement search functionality
         // NavigationManager?.NavigateTo("/search");
    }

    private void HandleSettings()
    {
        // Implement search functionality
        NavigationManager?.NavigateTo("/settings");
    }
}

